---
title: "term7-project"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```
```{r}
#Load in the data
loans <- read.csv('prosperLoanData.csv')
library(ggplot2)
library(dplyr)

```
## Exploring the data

Here we will explore the data and choose some variables to examine in further depth.
```{r}
colnames(loans)

table(loans$LoanStatus)
```
I feel that the most interesting investigation into this data would be attempting to predict whether or not a loan defaults. This is obviously a tough thing, so I will first begin by examining the characteristics of defaulted loans versus completed ones.
```{r}
defaults <- subset(loans, LoanStatus == 'Defaulted')
completed <- subset(loans, LoanStatus == 'Completed')
```
The first things I am going to look at are credit grade and employment status. I expect that loans that default will have a lower credit grade and/or a more precarious employment status.

By reading the documentation it is clear that loans post-January 2009 have a Prosper Rating while those before have a credit grade. Therefore I am going to combine them into one varable called 'Rating'.
```{r}
loans$Rating <- paste(loans$CreditGrade, loans$ProsperRating..Alpha.)
```
Now let's look.
```{r}
ggplot(aes(x = Rating), data = defaults) +
  geom_bar()

ggsave('completecreditscore.png')
```
```{r}
ggplot(aes(x = Rating), data = completed) +
  geom_bar()

```
We notice something interesting from these graphs. As expected, the defaulted loans have ratings toward the lower end. However, the completed loans don't seem to favor one rating vs. another. Now let's look at employment status.
```{r}
ggplot(aes(x = EmploymentStatus), data = defaults) +
  geom_bar()

```
```{r}
ggplot(aes(x = EmploymentStatus), data = completed) +
  geom_bar()
```
We can see from the above that there isn't too much a difference in employment status, though the defaults seem to have more 'not available' than the completed. Now let's look at some quantitative variables, namely, credit score of the borrower. We will first average the upper and lower credit scores.
```{r}
#Don't forget to add this to the subsets too
loans$CreditScoreAvg <- (loans$CreditScoreRangeLower + loans$CreditScoreRangeUpper) / 2

defaults <- subset(loans, LoanStatus == 'Defaulted')
completed <- subset(loans, LoanStatus == 'Completed')

ggplot(aes(x = CreditScoreAvg), data = defaults) +
  geom_histogram(binwidth = 19)
```
```{r}
ggplot(aes(x = CreditScoreAvg), data = completed) +
  geom_histogram(binwidth = 19)
```

